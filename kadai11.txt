【プログラムの説明】
学籍番号を格納する文字配列stdnt_num、氏を格納する文字配列fam_name、名を格納する文字配列fst_nameを32バイト分と、電話番号を格納する文字配列ph_numを16バイト分、郵便番号を格納する文字配列pst_codeを8バイト分をメンバとする構造体personal_dataを定義。
すべて検索の際にstrcmp関数を使用して統一感を持たせるため、電話番号や郵便番号などの数字のみである情報も文字配列で統一した。
・search_data関数
返り値はvoid型。
検索の対象であるpersonal_data型の構造体配列と、検索する文字列srch、結果を保存するint型配列resultを引数にとる。
データの数だけiをつかってforでループし、1ループごとにpersonal_data型のすべての文字配列とsrchが一致するか判定し、一致した場合はresul[i]を1増やす。
・main
iを使ったforループを用いて、search_dataによって保存されたresult[i]が0でなければpersonal_data型配列i番目の要素をすべて表示。
ループの数はデータの数と一致。
【プログラムの説明:追記】
ユーザが氏を検索したいのに名でも一致すれば検索結果に反映されてしまう場合を除くため、ユーザに指定された項目を検索するように改良。
search_data関数にint型引数nを増やし、switch-case文によってnに対応する項目に対してのみ検索をかける。
【感想】
最初はpst_code[7]としていたせいで郵便番号で検索したとき変な挙動をした。null文字を忘れていたので反省。
昔にセキュアコーディングのページか何かでnull文字の有無で脆弱性につながるとか書いてあったのを思い出したのでちょっと調べてみようと思う。
【感想:追記】
課題の問題文が読めていなかった。今回はユーザに選択される項目は1つだけだったが複数選択のときも対応できるようにしたい。